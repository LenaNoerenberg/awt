// const parse = require('/jsonGridParser');
// import parse from 'jsonGridParser'
const JSON_STRING = `{
    "event_id": "5b4da747ab15f55e2df0faf3",
    "board_templates": {
      "0": {
        "gutter": 1,
        "w": 2,
        "h": 12,
        "grid": [
          {
            "playlist": "5b50aec5105e31730cd777c9",
            "autoplay_sound": false,
            "autoplay": false,
            "rows": 1,
            "cols": 2
          },
          {
            "playlist": "5b50aefa457a837312d5bd16",
            "autoplay_sound": false,
            "autoplay": false,
            "rows": 1,
            "cols": 2
          },
          {
            "playlist": "5b50aefb33cd21731e4ec660",
            "autoplay_sound": false,
            "autoplay": false,
            "rows": 1,
            "cols": 2
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af0790c61473187ed565",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af0a90c61473187ed566",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af10457a837312d5bd17",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af13105e31730cd777ca",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af1c90c61473187ed567",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af1d105e31730cd777cb",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af20105e31730cd777cc",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af2490c61473187ed568",
            "rows": 1,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 2,
            "playlist": "5b50af27457a837312d5bd18",
            "rows": 1,
            "autoplay_sound": false
          }
        ]
      },
      "600": {
        "gutter": 1,
        "w": 4,
        "h": 20,
        "grid": [
          {
            "playlist": "5b50ad50105e31730cd777c8",
            "autoplay_sound": false,
            "autoplay": false,
            "rows": 1,
            "cols": 4
          },
          {
            "playlist": "5b50aefa457a837312d5bd16",
            "autoplay_sound": false,
            "autoplay": false,
            "rows": 2,
            "cols": 4
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50aefb33cd21731e4ec660"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af0790c61473187ed565"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af0a90c61473187ed566"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af10457a837312d5bd17"
          },
          {
            "cols": 4,
            "rows": 1,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50ad53457a837312d5bd14"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af1c90c61473187ed567"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af1d105e31730cd777cb"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af20105e31730cd777cc"
          },
          {
            "cols": 4,
            "rows": 2,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50afcf90c61473187ed569"
          }
        ]
      },
      "1200": {
        "gutter": 1,
        "w": 64,
        "h": 36,
        "grid": [
          {
            "cols": 32,
            "rows": 9,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50aec5105e31730cd777c9"
          },
          {
            "autoplay": false,
            "cols": 32,
            "playlist": "5b50af13105e31730cd777ca",
            "rows": 9,
            "autoplay_sound": false
          },
          {
            "cols": 8,
            "rows": 9,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b510a9033cd21731e4ec665"
          },
          {
            "cols": 16,
            "rows": 9,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af10457a837312d5bd17"
          },
          {
            "cols": 16,
            "rows": 9,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b510f2433cd21731e4ec667"
          },
          {
            "cols": 16,
            "rows": 9,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b50af1c90c61473187ed567"
          },
          {
            "cols": 8,
            "rows": 9,
            "autoplay": false,
            "autoplay_sound": false,
            "playlist": "5b510a96105e31730cd777d0"
          },
          {
            "autoplay": false,
            "cols": 32,
            "playlist": "5b50a0eb105e31730cd777c2",
            "rows": 18,
            "autoplay_sound": false
          },
          {
            "autoplay": false,
            "cols": 32,
            "playlist": "5b5107b090c61473187ed56b",
            "rows": 18,
            "autoplay_sound": false
          }
        ]
      }
    }
  }`;



  const layout = parse(JSON_STRING);
  console.log(layout.breakpoints);




// The grid manages tiles using ids, which you can define. For our
// examples we'll just use the tile number as the unique id.
var TILE_IDS = [
    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,
    15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25
];

// templates in JSON matching the predefined selections you can
// choose on the demo page
var DemoTemplateRows = [
    [
        "AAAA",
        "BBBB",
        "BBBB",
        "CCCC",
        "CCCC",
        "DDDD",
        "DDDD",
        "EEEE",
        "EEEE",
        "FFFF",
        "FFFF",
        "GGGG",
        "HHHH",
        "HHHH",
        "IIII",
        "IIII",
        "JJJJ",
        "JJJJ",
        "KKKK",
        "KKKK"
    ], [
        "A A A B B C",
        "A A A D D C",
        "E E E D D F"
    ], [
        " A A B B . ",
        " A A B B . ",
        " A A C C . ",
        " . . . . ."
    ], [
        " A A . . ",
        " A A . . ",
        " B B . . ",
        " C C . ."
    ], [
        " A A A B B B ",
        " A A A B B B ",
        " A A A C C . ",
        " . . . . . ."
    ]
];

// SAMPLE #2
$(function() {
    
    var el = document.getElementById('sample2-grid');
    var grid = new Tiles.Grid(el);
    
    grid.cellPadding = 10;
    
    
    // template is selected by user, not generated so just
    // return the number of columns in the current template
    grid.resizeColumns = function() {
        return this.template.numCols;
    };
    
    // by default, each tile is an empty div, we'll override creation
    // to add a tile number to each div
    grid.createTile = function(tileId) {
        var tile = new Tiles.Tile(tileId);
        tile.$el.append('<div class="dev-tile-number">' + tileId + '</div>');
        tile.$el.append('<div class="playlist">' + 'Playlist Nummer 138714897198375' + '</div>');
        tile.$el.append('<div class="autoplay-sound">' + 'Autoplay Sound true' + '</div>');
        tile.$el.append('<div class="autoplay">' + 'Autoplay false' + '</div>');
        return tile;
    };
    
    // update the template selection
    var $templateButtons = $('#sample2-templates .dev-template').on('click', function(e) {
        
        // unselect all templates
        $templateButtons.removeClass("selected");
        
        // select the template we clicked on
        $(e.target).addClass("selected");
        
        // get the JSON rows for the selection
        var index = $(e.target).index();
        var rows = DemoTemplateRows[index];
        

        // Kacheln und numRows, numCols werden spaeter aus unserem Modul eingelesen
        var kachelDimensionen = [
            [32, 9],
            [32, 9],
            [8, 9],
            [16, 9],
            [16, 9],
            [16, 9],
            [8, 9],
            [32, 18],
            [32, 18]
        ];
        
        var numRows = 36;
        var numCols = 64;

        
        var rects = [];
        var height, width, x, y;
        

        // ein Array der Groesse numCols * numRows in dem gespeichert wird, welche Zelle bereits besucht wurde
        var visited = [];
        for(let i=0; i<numRows; i++) {
            visited[i] = new Array(numCols);
        };

        //console.log(visited);

        
        let i = 0;
        for (y = 0; y < numRows; y++) {
            for(x = 0; x < numCols; x++) {
              
                if (visited[y][x] === true){
                    //console.log("TRRRRRRRRUUUUU");
                    continue;
                };


                if (i >= kachelDimensionen.length){
                    break;
                }

                width = kachelDimensionen[i][0];
                // console.log('WIDTH: ' + width);  
                height = kachelDimensionen[i][1];
                // console.log('HEIGHT: ' + height);
                i++;

                
                for(let rectY = 0; rectY < height; rectY++) {
                    for(let rectX = 0; rectX < width; rectX++) {
                        // console.log(visited);
                        visited[y+rectY][x+rectX] = true;
                        // console.log(visited);
                    }
                }
                // add the rect
                rects.push(new Tiles.Rectangle(x, y, width, height));
            }
        }
        
        // set the new template and resize the grid

        //grid.template = Tiles.Template.fromJSON(rows); 
        grid.template =  new Tiles.Template(rects, numCols, numRows);

        //grid.cellPadding = 60; 
        grid.isDirty = true;
        grid.resize();
        
        // adjust number of tiles to match selected template
        var ids = TILE_IDS.slice(0, grid.template.rects.length);
        grid.updateTiles(ids);
        grid.redraw(true);
    });
    
    // make the initial selection
    $('#sample2-t1').trigger('click');
    
    // wait until users finishes resizing the browser
    var debouncedResize = debounce(function() {
        grid.resize();
        grid.redraw(true);
    }, 200);
    
    // when the window resizes, redraw the grid
    $(window).resize(debouncedResize);
});



// SAMPLE #3
$(function() {
    
    // create a custom Tile which customizes the resize behavior
    function CustomTile(tileId, element) {
        // initialize base
        Tiles.Tile.call(this, tileId, element);
    }
    
    CustomTile.prototype = new Tiles.Tile();
    
    CustomTile.prototype.resize = function(cellRect, pixelRect, animate, duration, onComplete) {
        
        // set the text inside the tile to the dimensions
        var cellDimensions = cellRect.width + ' x ' + cellRect.height;
        this.$el.find('.dev-tile-size').text(cellDimensions);
        
        // call the base to perform the resize
        Tiles.Tile.prototype.resize.call(
            this, cellRect, pixelRect, animate, duration, onComplete);
        };
        
        
        var el = document.getElementById('sample3-grid'),
        grid = new Tiles.Grid(el);
        
        // template is selected by user, not generated so just
        // return the number of columns in the current template
        grid.resizeColumns = function() {
            return this.template.numCols;
        };
        
        // we'll override creation to use our custom tile
        grid.createTile = function(tileId) {
            var tile = new CustomTile(tileId);
            tile.$el.append('<div class="dev-tile-size"></div>');
            return tile;
        };
        
        // update the template selection
        var $templateButtons = $('#sample3-templates .dev-template').on('click', function(e) {
            
            // unselect all templates
            $templateButtons.removeClass("selected");
            
            // select the template we clicked on
            $(e.target).addClass("selected");
            
            // get the JSON rows for the selection
            var index = $(e.target).index(),
            rows = DemoTemplateRows[index];
            
            // set the new template and resize the grid
            grid.template = Tiles.Template.fromJSON(rows);  
            grid.isDirty = true;
            grid.resize();
            
            // adjust number of tiles to match selected template
            var ids = TILE_IDS.slice(0, grid.template.rects.length);
            grid.updateTiles(ids);
            grid.redraw(true);
        });
        
        // make the initial selection
        $('#sample3-t1').trigger('click');
        
        // wait until users finishes resizing the browser
        var debouncedResize = debounce(function() {
            grid.resize();
            grid.redraw(true);
        }, 200);
        
        // when the window resizes, redraw the grid
        $(window).resize(debouncedResize);
    });
    